!function(){"use strict";class e{constructor(e){this.element=document.createElement("div"),this.name=e.name,this.status=e.status,this.id=e.id,this.date=new Date(e.created),this.created=`${this.date.getDate()}.${this.date.getMonth()}.${this.date.getFullYear()} ${this.date.getMinutes()}:${this.date.getHours()}`}pushItem(e){this.element.classList.add("item"),this.element.setAttribute("id",this.id);const t=document.createElement("div");t.classList.add("container");const n=document.createElement("button");n.classList.add(`${this.status}`,"checkbox"),t.append(n);const s=document.createElement("p");s.textContent=this.name,t.append(s);const o=document.createElement("p");o.textContent=this.created,t.append(o);const c=document.createElement("div");c.classList.add("buttons");const d=document.createElement("button");d.classList.add("edit","btn");const a=document.createElement("button");a.classList.add("delete","btn"),c.append(d),c.append(a),t.append(c),this.element.append(t);const l=document.createElement("div");l.classList.add("description"),this.element.append(l),e.append(this.element)}}const t=document.querySelector(".subscribe-form"),n=(document.querySelector(".name"),document.querySelector(".phone"),document.querySelector(".unsubscribe"),document.querySelector(".upload")),s=(document.querySelector(".create"),document.querySelector(".list")),o=document.querySelector(".modal_add"),c=document.querySelector(".add_button"),d=document.querySelector(".modal_delete"),a=document.querySelector(".modal_edit");let l=!1,r=!1;a.querySelector(".cansel").addEventListener("click",(()=>{a.style.display="none"}));const i=document.querySelector(".close"),u=new XMLHttpRequest;let p=0;function m(e,t,n,s){const o="name="+encodeURIComponent(t)+"&description="+encodeURIComponent(n)+"&status="+encodeURIComponent(s);u.onreadystatechange=()=>{if(4!==u.readyState)return null},u.open("PATCH",`http://localhost:7070?method=editTicket&id=${e}`),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(o)}const y=document.querySelector(".update-form");function h(e,t){const n=new XMLHttpRequest;n.open("GET",`http://localhost:7070?method=ticketById&id=${t}`),n.send(),n.addEventListener("load",(()=>{if(n.status>=200&&n.status<300)try{const t=JSON.parse(n.responseText);e.textContent=t.ticket.description,e.classList.add("toggle")}catch(e){}}))}function L(e,t){l=t;const n=new XMLHttpRequest;n.open("GET",`http://localhost:7070?method=ticketById&id=${e}`),n.send(),n.addEventListener("load",(()=>{if(n.status>=200&&n.status<300)try{const t=JSON.parse(n.responseText);m(e,t.ticket.name,t.ticket.description,l)}catch(e){}}))}function f(e){d.style.display="flex",d.querySelector("yes"),d.querySelector("no"),d.addEventListener("click",(t=>{if(t.target.className.includes("no"))d.style.display="none";else{const t=new XMLHttpRequest;t.onreadystatechange=()=>(t.readyState,null),t.open("DELETE",`http://localhost:7070?method=deleteTicketById&id=${e}`),t.send(),d.style.display="none"}}))}function q(e){a.style.display="flex";const t=a.querySelector(".name"),n=a.querySelector(".text");a.querySelector(".save"),p=e,u.open("GET",`http://localhost:7070?method=ticketById&id=${p}`),u.send(),u.addEventListener("load",(()=>{if(u.status>=200&&u.status<300)try{const e=JSON.parse(u.responseText);t.value=e.ticket.name,n.value=e.ticket.description,r=e.ticket.status}catch(e){console.error(e)}}))}y.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData(y),n=t.get("name"),s=t.get("description");return m(p,n,s,r),a.style.display="none",t.delete("name"),t.delete("description"),y.reset(),null})),i.addEventListener("click",(()=>{o.style.display="none"})),c.addEventListener("click",(()=>{o.style.display="flex"})),n.addEventListener("click",(function(){for(;s.firstChild;)s.removeChild(s.firstChild);const t=new XMLHttpRequest;t.open("GET","http://localhost:7070?method=allTickets"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(),t.addEventListener("load",(()=>{if(t.status>=200&&t.status<300)try{JSON.parse(t.responseText).map((t=>{new e(t).pushItem(s)})),function(){const e=Array.from(document.querySelectorAll(".item"));for(let t=0;t<e.length;t++){const n=e[t],s=n.getAttribute("id"),o=n.querySelector(".edit"),c=n.querySelector(".checkbox"),d=n.querySelector(".delete"),a=n.querySelector(".description");c.addEventListener("click",(e=>{let t=e.currentTarget;t.classList.contains("false")?(t.classList.add("true"),t.classList.remove("false")):(t.classList.add("false"),t.classList.remove("true"));let n=t.classList.contains("true");L(e.currentTarget.parentNode.parentNode.id,n),a.classList.add("toggle")})),d.addEventListener("click",(()=>{a.classList.add("toggle"),f(s)})),o.addEventListener("click",(e=>{e.preventDefault(),a.classList.add("toggle");let t=e.currentTarget.parentNode.parentNode.querySelector(".checkbox");t=t.classList.contains("true"),q(s)})),n.addEventListener("click",(()=>{a.classList.contains("toggle")?(a.style.display="none",a.textContent="",a.classList.remove("toggle")):(a.style.display="flex",h(a,s))}))}}()}catch(e){}}))})),t.addEventListener("submit",(e=>{e.preventDefault(),o.style.display="none";const n=new FormData(t),s=new XMLHttpRequest,c=n.get("name"),d=n.get("description"),a="name="+encodeURIComponent(c)+"&description="+encodeURIComponent(d)+"&status="+encodeURIComponent(!1);s.onreadystatechange=()=>{if(4!==s.readyState)return null},s.open("POST","http://localhost:7070?method=createTicket"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(a),n.delete("name"),n.delete("description"),t.reset()}))}();
//# sourceMappingURL=app.js.map